<%= render 'admins/shared/search', title: '推荐列表', url: admins_deliveries_path, placeholder: '被推荐人' %>
<ul class="nav nav-tabs">
  <% active = (params[:state] == "recommended") ? "active" : "" %>
  <li role="presentation" class="<%= active %>">
    <%= link_to "未审核<span class='badge'>#{active.present? ? deliveries.count : supplier.deliveries.recommended.count}</span>".html_safe, admins_deliveries_path(:state => "recommended", :supplier_id => params[:supplier_id]) %>
  </li>
  <% active = (params[:state] == "approved") ? "active" : "" %>
  <li role="presentation" class="<%= active %>">
    <%= link_to "待查看<span class='badge'>#{active.present? ? deliveries.count : supplier.deliveries.approved.count}</span>".html_safe, admins_deliveries_path(:state => "approved", :supplier_id => params[:supplier_id]) %>
  </li>
  <% active = (params[:state] == "paid") ? "active" : "" %>
  <li role="presentation" class="<%= active %>">
    <%= link_to "已付费查看<span class='badge'>#{active.present? ? deliveries.count : supplier.deliveries.paid.count}</span>".html_safe, admins_deliveries_path(:state => "paid", :supplier_id => params[:supplier_id]) %>
  </li>
  <% active = (params[:state] == "final_paid") ? "active" : "" %>
  <li role="presentation" class="<%= active %>">
    <%= link_to "已支付尾款<span class='badge'>#{active.present? ? deliveries.count : supplier.deliveries.final_paid.count}</span>".html_safe, admins_deliveries_path(:state => "final_paid", :supplier_id => params[:supplier_id]) %>
  </li>
  <% active = (params[:state] == "recruiter_refused") ? "active" : "" %>
  <li role="presentation" class="<%= active %>">
    <%= link_to "招聘方拒绝<span class='badge'>#{active.present? ? deliveries.count : supplier.deliveries.recruiter_refused.count}</span>".html_safe, admins_deliveries_path(:state => "recruiter_refused", :supplier_id => params[:supplier_id]) %>
  </li>
  <% active = (params[:state] == "admin_refused") ? "active" : "" %>
  <li role="presentation" class="<%= active %>">
    <%= link_to "管理员拒绝<span class='badge'>#{active.present? ? deliveries.count : supplier.deliveries.admin_refused.count}</span>".html_safe, admins_deliveries_path(:state => "admin_refused", :supplier_id => params[:supplier_id]) %>
  </li>
</ul>
<br>

<%= render 'list', deliveries: deliveries %>

<%= render 'shared/paginate', objs: deliveries %>